# Phase 6 実装計画 📋

## 概要

Phase 6 では、アプリの信頼性と法令順守を高めるために、以下の 3 ページを追加します。

- 運営者情報ページ
- プライバシーポリシーページ
- お問い合わせページ

これらは主に **静的コンテンツ主体のページ** としつつ、UX とアクセシビリティに配慮したナビゲーション・フォーム設計を行います。

---

## 実装優先順位と理由

### 🥇 優先度1: 運営者情報ページ
**想定工数**: 0.5〜1時間

**理由**:
- ✅ サイトの信頼性・透明性の根幹となる情報
- ✅ 静的コンテンツ中心で実装が容易
- ✅ 他のページ（プライバシーポリシー等）からの参照先になる

**実装内容（案）**:
- ページパス: `/legal/operator`（例）
- 表示項目: サービス名、運営者名、連絡先（お問い合わせページへのリンク）、所在地（必要に応じて）、免責事項へのリンク
- フッターおよびハンバーガーメニューからの導線追加

**UI/UX 方針**:
- セクション見出しを明確にする（例: 「運営者について」「連絡先」など）
- モバイルで読みやすい余白と行間
- 法的文言はできるだけ平易な日本語で補足

---

### 🥈 優先度2: プライバシーポリシーページ
**想定工数**: 1〜2時間（文面準備込み）

**理由**:
- ✅ 個人情報・ログ情報の取り扱いを明示するため必須
- ✅ 将来的な機能拡張（広告・解析など）との整合性を取る必要がある

**実装内容（案）**:
- ページパス: `/legal/privacy`
- 構成例:
  - 1. 収集する情報の種類（ユーザー登録情報、ログ、Cookie 等の有無）
  - 2. 利用目的
  - 3. 情報の保存期間
  - 4. 第三者提供の有無
  - 5. 外部サービス利用状況（Firebase など）
  - 6. 安全管理措置
  - 7. ユーザーからの問い合わせ窓口（お問い合わせページへのリンク）
  - 8. プライバシーポリシーの変更について

**技術的検討**:
- 文言はコンポーネント内に静的定義（将来 i18n 対応する場合は抽出を想定）
- 長文スクロール時の **目次リンク（ページ内アンカー）** を検討

---

### 🥉 優先度3: お問い合わせページ
**想定工数**: 1〜2時間

**理由**:
- ✅ ユーザーが不具合・要望を連絡するための重要な窓口
- ✅ 「運営者情報」「プライバシーポリシー」からの導線先になる

**実装内容（案）**:
- ページパス: `/contact`
- 入力項目（最小構成）:
  - お名前（任意）
  - メールアドレス（任意 or 必須 ※要検討）
  - お問い合わせ種別（バグ報告 / 機能要望 / その他）
  - 本文（必須）

**送信方法の方針**:
- **Phase 6 では、まずは「ユーザーのメールクライアント起動方式」を採用** し、バックエンド不要で実装
  - 「送信」ボタンで `mailto:` リンク生成（件名・本文テンプレート付き）
  - 送信前に確認ダイアログ（モーダル）で内容を表示
- 将来フェーズでの選択肢:
  - Firebase Functions + Firestore による問い合わせ保存
  - 外部フォームサービス連携（外部サービス使用方針と要相談）

**UX / バリデーション**:
- 必須項目の簡易バリデーション（空チェック・メール形式）
- エラー表示はフィールド下にテキストで表示
- 送信前に「プライバシーポリシーに同意しました」のチェックボックスを設置

---

## 画面設計とナビゲーション

### グローバルナビゲーション / フッター
- `Header` / `BottomNavigation` / フッター（存在する場合）に以下のリンクを追加:
  - 「運営者情報」 → `/legal/operator`
  - 「プライバシーポリシー」 → `/legal/privacy`
  - 「お問い合わせ」 → `/contact`
- モバイルでのメニュー内配置は「その他」もしくは「設定」近辺にまとめて配置

### ページレイアウト共通方針
- 共通レイアウトコンポーネント（例: `PageLayout`）があれば流用
- タイトル + 説明 + セクションごとのカード表示で読みやすさを確保
- アクセシビリティ:
  - `main` / `section` / `h1~h3` などセマンティックなタグ
  - 見出し階層を崩さない

---

## 技術的な実装方針

### ルーティング
- `src/App.tsx` またはルート定義ファイルに 3 ページ分の Route を追加:
  - `/legal/operator`
  - `/legal/privacy`
  - `/contact`

### コンポーネント構成（案）
- `src/pages/LegalOperator.tsx`  — 運営者情報
- `src/pages/LegalPrivacy.tsx`   — プライバシーポリシー
- `src/pages/Contact.tsx`        — お問い合わせ
- 必要に応じて:
  - `src/components/legal/Section.tsx` など簡易セクションコンポーネント
  - `src/components/forms/ContactForm.tsx` などフォーム専用コンポーネント

### セキュリティ / プライバシー上の注意
- 個人情報・連絡先は **環境変数や設定ファイル由来の値に切り出すことを検討**（例: 運営者メールアドレス）
- 画面上には **APIキーや内部IDなどの機密情報を一切表示しない**
- お問い合わせフォームでサーバー送信を実装する場合は、
  - CSRF 対策
  - スパム対策（reCAPTCHA 相当の仕組み or 簡易な人間確認）
  を将来フェーズで検討

---

## テスト戦略

### 単体テスト
- 各ページコンポーネントが正しくレンダリングされること
- 主要な文言・リンクが存在すること（スナップショットまたはロールベースで確認）

### 統合テスト / E2E テスト
- ナビゲーションから 3 ページに遷移できること
- プライバシーポリシー内のアンカーリンク（目次）が機能すること（実装した場合）
- お問い合わせページで:
  - 必須項目未入力時にエラーメッセージが出ること
  - 正常入力時に `mailto:` が正しく生成されること

---

## スケジュール案

### Day 1
- 運営者情報ページの実装
- プライバシーポリシーページの骨組み作成（セクション構造のみ）

### Day 2
- プライバシーポリシー文面の反映
- お問い合わせページ UI ＋ バリデーション実装

### Day 3（予備）
- スタイル微調整
- E2E テスト追加 / 既存テストの更新
- 文言・リンクの最終確認

---

## ドキュメント作成

実装完了後に、以下のドキュメントを追加・更新します。

- `PHASE6_COMPLETED.md`（本フェーズ完了報告）
- `docs/` 配下に必要であれば `LEGAL_PAGES_GUIDE.md` 的な開発者向けガイド
  - ページ URL 一覧
  - 変更時の注意点（法務確認が必要な箇所 など）

---

## まとめ

Phase 6 では、機能追加というよりも **法務・信頼性・サポート体制の整備** にフォーカスします。

- ユーザーにとって安心できる情報（運営者情報・プライバシーポリシー）を明示
- 不具合報告や要望を受け取る窓口（お問い合わせ）を用意
- 既存の UI/ルーティング構成に沿った、シンプルかつ拡張しやすい実装方針

この計画に沿って、次のステップとしてページコンポーネントとルーティングの実装を進めます。