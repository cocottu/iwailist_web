# Iwailist Web - Cursor AI Rules

## セキュリティルール（最重要）

### 🚫 絶対に禁止される項目
- APIキー、アクセストークン、シークレットキーのハードコーディング
- パスワード、認証情報のハードコーディング
- データベース接続文字列（本番環境用）
- プライベートなURL、エンドポイント
- 個人情報（メールアドレス、電話番号、住所等）
- 機密設定値
- デバッグ用の本番データ

### ✅ 推奨される実装方法
- 環境変数（`import.meta.env`）を使用
- 設定ファイルを`.env.example`として提供
- 機密情報は`.env.local`で管理（gitignore済み）
- 本番用設定は環境変数で注入

## コーディング規約

### コード品質
- TypeScriptの型安全性を重視
- ESLintルールに従う
- コンポーネントは関数型で記述
- 適切なエラーハンドリングを実装

### パフォーマンス
- 不要な再レンダリングを避ける
- 適切なメモ化を使用
- 画像の最適化
- バンドルサイズの最適化

### アクセシビリティ
- セマンティックHTMLを使用
- ARIA属性を適切に設定
- キーボードナビゲーション対応
- スクリーンリーダー対応

## ファイル構造

### コンポーネント
- `src/components/ui/` - 再利用可能なUIコンポーネント
- `src/components/layout/` - レイアウト関連コンポーネント
- `src/pages/` - ページコンポーネント

### データ管理
- `src/database/` - IndexedDB関連
- `src/types/` - TypeScript型定義
- 外部APIは使用しない（オフライン対応）

## テスト

### 必須テスト
- コンポーネントのユニットテスト
- 統合テスト
- E2Eテスト（Playwright）

### テストファイル命名
- `*.test.tsx` - コンポーネントテスト
- `*.test.ts` - ユーティリティテスト
- `*.spec.ts` - E2Eテスト

## デプロイメント

### 本番ビルド前チェック
- `console.log`等のデバッグコード削除
- `alert()`、`confirm()`を適切なUIに置換
- 不要なコメント削除
- バンドルサイズ確認

### 環境設定
- 開発環境: `npm run dev`
- 本番ビルド: `npm run build`
- プレビュー: `npm run preview`

## セキュリティチェックリスト

コミット前に以下を確認：
- [ ] 機密情報がハードコーディングされていない
- [ ] 環境変数が適切に使用されている
- [ ] デバッグコードが削除されている
- [ ] 個人情報が含まれていない
- [ ] 本番用の設定値が露出していない

## 禁止事項

### コード内での禁止
```typescript
// ❌ 禁止
const API_KEY = "sk-1234567890abcdef";
const DB_URL = "mongodb://user:password@localhost:27017/db";

// ✅ 推奨
const API_KEY = import.meta.env.VITE_API_KEY;
const DB_URL = import.meta.env.VITE_DATABASE_URL;
```

### ファイル内での禁止
- `.env`ファイルのコミット
- 設定ファイル内の機密情報
- ログファイル内の個人情報
- テストデータ内の実在する個人情報

## 緊急時の対応

機密情報がコミットされた場合：
1. 即座にコミット履歴から削除
2. 影響範囲を特定
3. 必要に応じてシークレットを再生成
4. チームに報告

---

**重要**: このルールは絶対に守ってください。セキュリティ違反はプロジェクト全体に影響します。
